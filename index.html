<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
</head>
<body>

  <input type="file" id="your-files" multiple>
  <div id="map"></div>

<style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
            width: 100%;
        }
    </style>


  <script>
    var map;
    var control = document.getElementById("your-files");
    control.addEventListener("change", function(event) {

      // When the control has changed, there are new files

      var i = 0,
          files = control.files,
          len = files.length;

      var readAndCreate = function (file) {
        var reader = new FileReader();
        reader.readAsText(file);

        reader.onload = function(e) {
          var text = reader.result;
          console.log(text);
          omnivore.gpx.parse(text).addTo(map);
        };
      };

      for (; i < len; i++) {
        console.log("Filename: " + files[i].name);
        console.log("Type: " + files[i].type);
        console.log("Size: " + files[i].size + " bytes");
        readAndCreate(files[i]);
      }

    }, false);

    window.onload = function () {
      map = L.map('map').setView([51.505, -0.09], 13);

      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);
    };

  </script>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>
  <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
</body>
</html>
